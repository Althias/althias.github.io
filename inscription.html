<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- En-tête de la page -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alambik Festival</title>
    <!-- Feuilles de style CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css">
  </head>
  <body>    
    <!-- Navigation -->
    <section id="navigation"></section>
    <script>
      fetch('./assets/html/navigation.html')
        .then(response => response.text())
        .then(data => {
          document.querySelector('#navigation').innerHTML = data;
        });
    </script>
      
    <!-- Section Banner -->
    <section id="banner"></section>
    <script>
      fetch('./assets/html/banner.html')
        .then(response => response.text())
        .then(data => {
          document.querySelector('#banner').innerHTML = data;
        });
    </script>

    <!-- Inscriptions -->
    <section id="inscriptions">
        <div class="container">
        <h2 class="text-center">Inscriptions</h2>
        <form>
            <div class="form-group">
              <label for="nom">Nom & Prénom</label>
              <input type="text" class="form-control" id="nom" required>
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
              <label for="billet">Billet</label>
              <select type="text" class="form-control" id="billet"required>
                <option value="25" selected>Billet 25€</option>
                <option value="30">Billet 30€</option>
                <option value="35">Billet 35€</option>
              </select>
            </div>
            <div class="form-group">
              <label for="carte-conso" title="10 poinçons par carte">Carte consommations</label>
              <input type="number" class="form-control" min="0" max="10" id="carte-conso" value="0"></input>
            </div>
            <div class="form-group">
              <label for="carte-conso" title="10 poinçons par carte">Repas : </label></br>
              <label><input type="checkbox" name="meal[]" value="5" checked> Samedi soir</label></br>
              <label><input type="checkbox" name="meal[]" value="5"> Dimanche midi</label></br>
              <label><input type="checkbox" name="meal[]" value="5"> Dimanche soir</label></br>
              <label><input type="checkbox" name="meal[]" value="5"> Lundi midi</label>
            </div>
            
            <div class="form-group">
              <label for="message">Total cost:</label>
              <span id="total-cost"></span>
              <script>
                function calculateTotal() {
                  // Get the value of the selected billet
                  let billet = parseInt(document.querySelector("#billet").value);
                  
                  // Get the value of the carte-conso input field
                  let carteConso = parseInt(document.querySelector("#carte-conso").value);
                  
                  // Get all the selected meal checkboxes
                  let meals = document.querySelectorAll("input[name='meal[]']:checked");
                  
                  // Calculate the total cost of the meals
                  let mealCost = 0;
                  meals.forEach(meal => mealCost += parseInt(meal.value));
                  
                  // Calculate the total cost of the order
                  let totalCost = billet + (carteConso * 10) + mealCost;
                  
                  // Display the total cost
                  document.querySelector("#total-cost").innerHTML = "$" + totalCost;
                }
              
                // Calculate the total cost when the form loads
                window.onload = calculateTotal;
                
                // Recalculate the total cost when any form field changes
                document.querySelector("form").addEventListener("change", calculateTotal);
              </script>
            </div>
            <div class="form-group">
              <button type="submit" class="btn btn-primary">Envoyer</button>
            </div>
          </form>
        </div>
    </section>

    <!-- Section Footer -->
    <section id="footer"></section>
    <script>
      fetch('./assets/html/footer.html')
        .then(response => response.text())
        .then(data => {
      document.querySelector('#footer').innerHTML = data;
        });
    </script>
  </body>
</html>
